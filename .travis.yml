language: php

php:
  - 5.4
  - 5.5
  - 5.6
  - 7.0

sudo: false

env:
  matrix:
    - NETCOMMONS_VERSION=master DB=mysql
  global:
    - secure: "oly0qVqAlF1430Z4C9p9oAGkXGt1Qqn2z36LPRMgAoxgD3BE14WMMYEAhwV2eOJ/VkIsEfJcEsBhSqxad/Lv2eXk01GyuQNzZ+5PeqHBSdlj+O2Q1LwiKY/bykbfhtDXRimJU19NtR+7ySoqThpVql9xe1jo48YLhSK9bj507B6OCt0s+rOCsMcYxWXDOCJJDJ0chtU+zTZwdyRVue3XeDkj4ak7xzIip+NI3sSQNb9brKleFBEuEqCxq8pGSD4OxDCkoil1SsCmWTxsVHbNXum7lNctIaZCedtfRM7mBhsrrk+WZ/3jPUs4ggJzTV2e1xtcX7g+Br0UyxcpL3PRxE91FbIRVHIYCGtls6MtgGFAXkWy0nqUN6eIAzD7Dr19J4I+eWXUB9iKyE0SuBhQAJWT4hqXb51iPZ9j/w/ox07MObBW1TJqL3hXhZelEcDli7y8CrZ1Uvn2hQywsZwQmzFKrsw7fWHgUMlpZALEeOBeF73U+GB1Y19dCWcHSf05pq1uxkBfz1CL+nT9iEHadaW4jqLCfc+UsKLmTYHvzgxs49/pBgmHqIU/FPihR1T534U1iQqtv/iagqjiKR/X70veZF1CdYM9O7W5ThSoMarRoNoN+rx8fwHl7L/b3cyn2Oi2Jwj0IFvtsKw9Qz+iWtf0eT0LZ/URa62pSNuPddU="
    - GIT_COMMITTER_NAME=s-nakajima
    - GIT_COMMITTER_EMAIL=nakajimashouhei@gmail.com
    - GIT_AUTHOR_NAME=s-nakajima
    - GIT_AUTHOR_EMAIL=nakajimashouhei@gmail.com

before_script:
  - export NETCOMMONS_BUILD_DIR=`dirname $TRAVIS_BUILD_DIR`/NetCommons3
  - git clone git://github.com/NetCommons3/NetCommons3 $NETCOMMONS_BUILD_DIR
  - cd $NETCOMMONS_BUILD_DIR
  - git checkout $NETCOMMONS_VERSION
  - travis_wait . tools/build/plugins/cakephp/travis/pre.sh
  - . tools/build/plugins/cakephp/travis/environment.sh

script:
  - . tools/build/plugins/cakephp/travis/main.sh

after_script:
  - . tools/build/plugins/cakephp/travis/post.sh

notifications:
  email:
    recipients:
      - netcommons3@googlegroups.com
    on_success: never  # default: change
    on_failure: always # default: always
